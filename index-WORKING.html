<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introvy.ai - Bring Your Job Application to Life</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .video-container {
            position: relative;
            width: 100%;
            min-height: 400px;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }
        .skill-tag {
            display: inline-block;
            background: #e5e7eb;
            color: #374151;
            padding: 4px 12px;
            margin: 4px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .skill-tag.selected {
            background: #667eea;
            color: white;
        }
        .StripeElement {
            background: white;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #d1d5db;
        }
        .StripeElement--focus {
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);
        }
        .hidden { display: none !important; }
        .recording-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-white">
    <!-- Header -->
    <header class="bg-white shadow-sm fixed w-full top-0 z-50">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-video text-2xl gradient-text mr-2"></i>
                    <span class="text-xl font-bold text-gray-800">Introvy.ai</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#home" class="text-gray-600 hover:text-blue-600 transition smooth-scroll">Home</a>
                    <a href="#how-it-works" class="text-gray-600 hover:text-blue-600 transition smooth-scroll">How It Works</a>
                    <a href="#pricing" class="text-gray-600 hover:text-blue-600 transition smooth-scroll">Pricing</a>
                    <a href="#about" class="text-gray-600 hover:text-blue-600 transition smooth-scroll">About</a>
                    <a href="#contact" class="text-gray-600 hover:text-blue-600 transition smooth-scroll">Contact</a>
                </div>
                <div class="md:hidden">
                    <button class="text-gray-600">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content Container -->
    <div id="main-content">
        <!-- Homepage -->
        <div id="homepage-section">
            <!-- Hero Section -->
            <section id="home" class="gradient-bg text-white py-20 mt-16">
                <div class="container mx-auto px-6 text-center">
                    <div class="flex items-center justify-center mb-6">
                        <i class="fas fa-video text-4xl mr-3"></i>
                        <h1 class="text-5xl md:text-6xl font-bold">Introvy.ai</h1>
                    </div>
                    <h2 class="text-3xl md:text-4xl font-bold mb-6">
                        Bring your job application to life
                    </h2>
                    <p class="text-xl md:text-2xl mb-8 opacity-90">
                        Send better job applications with personalized video answers.<br>
                        Stand out from the crowd with AI-powered interview questions<br>
                        tailored to any job.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="showCandidateApplication()" class="bg-white text-blue-600 px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition">
                            Get Started Free
                        </button>
                        <button onclick="showRecruiterPosting()" class="bg-transparent border-2 border-white text-white px-8 py-3 rounded-full font-semibold hover:bg-white hover:text-blue-600 transition">
                            Post a Job - $25
                        </button>
                    </div>
                </div>
            </section>

            <!-- How It Works -->
            <section id="how-it-works" class="py-16">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-6">
                        <i class="fas fa-video text-4xl gradient-text mb-4"></i>
                        <h2 class="text-4xl font-bold mb-4">How It Works</h2>
                        <p class="text-xl text-gray-600 mb-12">Simple steps to transform your job applications</p>
                    </div>
                    
                    <!-- For Job Candidates -->
                    <div class="mb-16">
                        <h3 class="text-2xl font-bold text-center mb-8">For Job Candidates</h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl font-bold text-blue-600">1</span>
                                </div>
                                <h4 class="text-xl font-semibold mb-2">Paste Job Description</h4>
                                <p class="text-gray-600">Copy any job description from company websites or job boards</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl font-bold text-blue-600">2</span>
                                </div>
                                <h4 class="text-xl font-semibold mb-2">AI Questions</h4>
                                <p class="text-gray-600">Get 3-5 tailored interview questions with difficulty levels</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl font-bold text-blue-600">3</span>
                                </div>
                                <h4 class="text-xl font-semibold mb-2">Record Videos</h4>
                                <p class="text-gray-600">Answer questions via webcam with regeneration options</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl font-bold text-blue-600">4</span>
                                </div>
                                <h4 class="text-xl font-semibold mb-2">Share Link</h4>
                                <p class="text-gray-600">Send your personalized submission to employers</p>
                            </div>
                        </div>
                    </div>

                    <!-- For Recruiters -->
                    <div>
                        <h3 class="text-2xl font-bold text-center mb-8">For Recruiters</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl font-bold text-green-600">1</span>
                                </div>
                                <h4 class="text-xl font-semibold mb-2">Create 60s Pitch</h4>
                                <p class="text-gray-600">Record a short video about your role and company culture</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl font-bold text-green-600">2</span>
                                </div>
                                <h4 class="text-xl font-semibold mb-2">Add Job Details</h4>
                                <p class="text-gray-600">Fill in title, company, location, and skill tags</p>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl font-bold text-green-600">3</span>
                                </div>
                                <h4 class="text-xl font-semibold mb-2">Go Live - $25</h4>
                                <p class="text-gray-600">Your video spotlight appears on our public job wall</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pricing -->
            <section id="pricing" class="py-16 bg-gray-50">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-6">
                        <i class="fas fa-video text-4xl gradient-text mb-4"></i>
                        <h2 class="text-4xl font-bold mb-4">Choose Your Plan</h2>
                        <p class="text-xl text-gray-600 mb-12">Start free, upgrade when you need more power</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                        <div class="bg-white p-8 rounded-lg shadow-md">
                            <h3 class="text-2xl font-bold mb-2">Free</h3>
                            <div class="text-4xl font-bold mb-4">$0</div>
                            <p class="text-gray-600 mb-6">Perfect for getting started</p>
                            <ul class="space-y-3 mb-8">
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Up to 3 video submissions/month</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> AI-generated questions (Easy/Medium)</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> 1 question regeneration per submission</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Desktop and mobile access</li>
                            </ul>
                            <button onclick="showCandidateApplication()" class="w-full bg-gray-200 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-300 transition">
                                Get Started Free
                            </button>
                        </div>
                        <div class="bg-white p-8 rounded-lg shadow-md border-2 border-blue-500 relative">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white px-4 py-1 rounded-full text-sm">
                                Most Popular
                            </div>
                            <h3 class="text-2xl font-bold mb-2">Pro</h3>
                            <div class="text-4xl font-bold mb-4">$9<span class="text-lg text-gray-600">/month</span></div>
                            <p class="text-gray-600 mb-6">For serious job seekers</p>
                            <ul class="space-y-3 mb-8">
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Unlimited video submissions</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> All difficulty levels (Easy/Medium/Hard)</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> 2 question regenerations per submission</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Advanced features</li>
                            </ul>
                            <button onclick="showCandidateApplication()" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold hover:opacity-90 transition">
                                Upgrade to Pro
                            </button>
                        </div>
                        <div class="bg-white p-8 rounded-lg shadow-md">
                            <h3 class="text-2xl font-bold mb-2">Video Spotlight</h3>
                            <div class="text-4xl font-bold mb-4">$25<span class="text-lg text-gray-600">/job posting</span></div>
                            <p class="text-gray-600 mb-6">For recruiters</p>
                            <ul class="space-y-3 mb-8">
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> 60-second job pitch video</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Featured on public job wall</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Skill-based filtering</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-500 mr-2"></i> Instant activation</li>
                            </ul>
                            <button onclick="showRecruiterPosting()" class="w-full bg-green-500 text-white py-3 rounded-lg font-semibold hover:bg-green-600 transition">
                                Post a Job
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- About -->
            <section id="about" class="py-16">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-6">
                        <i class="fas fa-video text-4xl gradient-text mb-4"></i>
                        <h2 class="text-4xl font-bold mb-12">About Introvy.ai</h2>
                    </div>
                    <div class="max-w-4xl mx-auto text-center mb-12">
                        <p class="text-xl text-gray-700 mb-6">
                            We're on a mission to humanize job applications and help both candidates and recruiters make better connections through the power of video.
                        </p>
                        <div class="bg-gray-50 p-8 rounded-lg">
                            <h3 class="text-2xl font-bold mb-4">Our Mission</h3>
                            <p class="text-gray-700 mb-4">
                                Traditional job applications are broken. Resumes can't capture personality, passion, or communication skills. We believe every candidate deserves a chance to show who they really are beyond bullet points and keywords.
                            </p>
                            <p class="text-gray-700">
                                Introvy.ai bridges the gap between candidates and employers by making it easy to create personalized video responses that showcase the human side of job applications.
                            </p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                        <div class="text-center">
                            <div class="text-4xl font-bold text-blue-600 mb-2">2024</div>
                            <div class="text-gray-600">Founded</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl font-bold text-blue-600 mb-2">Chicago</div>
                            <div class="text-gray-600">Based in Illinois</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl font-bold text-blue-600 mb-2">AI + HR</div>
                            <div class="text-gray-600">Tech Focus</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contact -->
            <section id="contact" class="py-16 bg-gray-50">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-6">
                        <i class="fas fa-video text-4xl gradient-text mb-4"></i>
                        <h2 class="text-4xl font-bold mb-4">Get In Touch</h2>
                        <p class="text-xl text-gray-600 mb-12">Have questions? We'd love to hear from you.</p>
                    </div>
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-white p-8 rounded-lg shadow-md">
                            <h3 class="text-2xl font-bold mb-6">Contact Information</h3>
                            <div class="space-y-4">
                                <div class="flex items-center">
                                    <i class="fas fa-envelope text-blue-500 mr-3"></i>
                                    <div>
                                        <div class="font-semibold">Email</div>
                                        <div class="text-gray-600"><a href="/cdn-cgi/l/email-protection#fb939e979794bb92958f89948d82d59a92" class="hover:text-blue-600"><span class="__cf_email__" data-cfemail="fd9598919192bd9493898f928b84d39c94">[email&#160;protected]</span></a></div>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-map-marker-alt text-blue-500 mr-3"></i>
                                    <div>
                                        <div class="font-semibold">Address</div>
                                        <div class="text-gray-600">Chicago, IL</div>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-clock text-blue-500 mr-3"></i>
                                    <div>
                                        <div class="font-semibold">Response Time</div>
                                        <div class="text-gray-600">Within 24 hours</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="bg-gray-800 text-white py-12">
                <div class="container mx-auto px-6">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                        <div>
                            <div class="flex items-center mb-4">
                                <i class="fas fa-video text-2xl mr-2"></i>
                                <span class="text-xl font-bold">Introvy.ai</span>
                            </div>
                            <p class="text-gray-400">Bringing job applications to life through personalized video responses.</p>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-4">Product</h4>
                            <ul class="space-y-2 text-gray-400">
                                <li><a href="#how-it-works" class="hover:text-white transition smooth-scroll">How It Works</a></li>
                                <li><a href="#pricing" class="hover:text-white transition smooth-scroll">Pricing</a></li>
                                <li><button onclick="showCandidateApplication()" class="hover:text-white transition text-left">Apply Now</button></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-4">Company</h4>
                            <ul class="space-y-2 text-gray-400">
                                <li><a href="#about" class="hover:text-white transition smooth-scroll">About</a></li>
                                <li><a href="#contact" class="hover:text-white transition smooth-scroll">Contact</a></li>
                                <li><a href="/cdn-cgi/l/email-protection#b2dad7dededdf2dbdcc6c0ddc4cb9cd3db" class="hover:text-white transition">Support</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-4">Get Started</h4>
                            <ul class="space-y-2 text-gray-400">
                                <li><button onclick="showCandidateApplication()" class="hover:text-white transition text-left">Create Application</button></li>
                                <li><button onclick="showRecruiterPosting()" class="hover:text-white transition text-left">Post a Job</button></li>
                                <li><a href="/cdn-cgi/l/email-protection#a7cfc2cbcbc8e7cec9d3d5c8d1de89c6ce" class="hover:text-white transition">Contact Us</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                        <p>&copy; 2024 Introvy.ai. All rights reserved.</p>
                    </div>
                </div>
            </footer>
        </div>

        <!-- Candidate Application Section -->
        <div id="candidate-application" class="hidden">
            <div class="min-h-screen bg-gray-50">
                <!-- Header -->
                <div class="bg-white shadow-sm">
                    <div class="container mx-auto px-6 py-4">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center">
                                <i class="fas fa-video text-2xl gradient-text mr-2"></i>
                                <span class="text-xl font-bold text-gray-800">Introvy.ai</span>
                            </div>
                            <button onclick="showHomepage()" class="text-gray-600 hover:text-blue-600">
                                <i class="fas fa-arrow-left mr-2"></i>Back to Home
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="container mx-auto px-6 py-8">
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-white rounded-lg shadow-lg p-8">
                            <div class="flex items-center mb-6">
                                <i class="fas fa-video text-3xl gradient-text mr-3"></i>
                                <h1 class="text-3xl font-bold text-gray-800">Create Your Video Application</h1>
                            </div>
                            <p class="text-gray-600 mb-8">Transform your job application with AI-powered questions and personalized video responses.</p>

                            <!-- Step 1: Job Details -->
                            <div id="step-job-details" class="border-b border-gray-200 pb-8">
                                <h2 class="text-xl font-semibold mb-4">
                                    <span class="bg-blue-500 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">1</span>
                                    Job Details
                                </h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Your Name *</label>
                                        <input type="text" id="candidateName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="John Doe">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Job Title *</label>
                                        <input type="text" id="jobTitle" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Software Engineer">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Company Name *</label>
                                        <input type="text" id="companyName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Tech Company">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Your Plan</label>
                                        <select id="userPlan" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                            <option value="free">Free Plan</option>
                                            <option value="pro">Pro Plan ($9/month)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-6">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Job Description *</label>
                                    <textarea id="jobDescription" required rows="6" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Paste the job description here..."></textarea>
                                </div>
                                <div class="mb-6">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Question Difficulty</label>
                                    <select id="difficultyLevel" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                        <option value="easy">Easy - Basic questions for entry-level positions</option>
                                        <option value="medium">Medium - Standard professional questions</option>
                                        <option value="hard">Hard - Advanced questions (Pro only)</option>
                                    </select>
                                </div>
                                <button onclick="generateQuestions()" id="generateBtn" class="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition">
                                    <i class="fas fa-magic mr-2"></i>Generate AI Questions
                                </button>
                            </div>

                            <!-- Step 2: Generated Questions -->
                            <div id="step-questions" class="hidden border-b border-gray-200 pb-8 mt-8">
                                <div class="flex justify-between items-center mb-4">
                                    <h2 class="text-xl font-semibold">
                                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">2</span>
                                        Generated Questions
                                    </h2>
                                    <div id="regeneration-controls" class="flex items-center space-x-4">
                                        <span id="regeneration-count" class="text-sm text-gray-600"></span>
                                        <button onclick="regenerateQuestions()" id="regenerateBtn" class="bg-gray-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition">
                                            <i class="fas fa-redo mr-2"></i>Regenerate
                                        </button>
                                    </div>
                                </div>
                                <div id="questions-container" class="space-y-4 mb-6"></div>
                                <button onclick="startRecording()" class="bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition">
                                    <i class="fas fa-video mr-2"></i>Start Recording Answers
                                </button>
                            </div>

                            <!-- Step 3: Video Recording -->
                            <div id="step-recording" class="hidden border-b border-gray-200 pb-8 mt-8">
                                <h2 class="text-xl font-semibold mb-4">
                                    <span class="bg-blue-500 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">3</span>
                                    Record Your Answers
                                </h2>
                                <div id="current-question" class="bg-blue-50 p-4 rounded-lg mb-6">
                                    <p class="text-lg font-medium text-blue-800"></p>
                                </div>
                                <div class="video-container mb-6">
                                    <video id="videoPreview" autoplay muted playsinline class="w-full h-full object-cover"></video>
                                    <div id="videoPlaceholder" class="absolute inset-0 flex items-center justify-center text-white">
                                        <div class="text-center">
                                            <i class="fas fa-video text-6xl mb-4"></i>
                                            <p class="text-xl">Click "Start Recording" to begin</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex space-x-4 mb-4">
                                    <button type="button" id="startRecordingBtn" onclick="startVideoRecording()" class="bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition">
                                        <i class="fas fa-record-vinyl mr-2"></i>Start Recording
                                    </button>
                                    <button type="button" id="stopRecordingBtn" onclick="stopVideoRecording()" class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition" disabled>
                                        <i class="fas fa-stop mr-2"></i>Stop Recording
                                    </button>
                                    <button type="button" id="nextQuestionBtn" onclick="nextQuestion()" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition hidden">
                                        <i class="fas fa-arrow-right mr-2"></i>Next Question
                                    </button>
                                </div>
                                <div id="recordingStatus" class="text-sm text-gray-600"></div>
                                <div id="recordingProgress" class="mt-4">
                                    <div class="flex justify-between text-sm text-gray-600 mb-2">
                                        <span>Progress</span>
                                        <span id="progressText">0 of 0 questions completed</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div id="progressBar" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 4: Submit -->
                            <div id="step-submit" class="hidden mt-8">
                                <h2 class="text-xl font-semibold mb-4">
                                    <span class="bg-green-500 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">4</span>
                                    Submit Your Application
                                </h2>
                                <div class="bg-green-50 p-6 rounded-lg mb-6">
                                    <h3 class="text-lg font-semibold text-green-800 mb-2">Great job! Your video application is ready.</h3>
                                    <p class="text-green-700">You've completed all questions. Click submit to create your shareable application link.</p>
                                </div>
                                <button onclick="submitApplication()" id="submitApplicationBtn" class="bg-blue-500 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-600 transition">
                                    <i class="fas fa-paper-plane mr-2"></i>Submit Application
                                </button>
                            </div>

                            <!-- Success -->
                            <div id="step-success" class="hidden mt-8">
                                <div class="text-center py-8">
                                    <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                                    <h2 class="text-2xl font-bold text-green-800 mb-4">Application Submitted Successfully!</h2>
                                    <p class="text-gray-600 mb-6">Your personalized video application has been created. Share this link with employers:</p>
                                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                                        <div class="flex items-center justify-between">
                                            <span id="submissionLink" class="text-blue-600 font-mono"></span>
                                            <button onclick="copyLink()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                                                <i class="fas fa-copy mr-2"></i>Copy Link
                                            </button>
                                        </div>
                                    </div>
                                    <button onclick="showHomepage()" class="bg-gray-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-600 transition">
                                        Create Another Application
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recruiter Posting Section -->
        <div id="recruiter-posting" class="hidden">
            <div class="min-h-screen bg-gray-50">
                <!-- Header -->
                <div class="bg-white shadow-sm">
                    <div class="container mx-auto px-6 py-4">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center">
                                <i class="fas fa-video text-2xl gradient-text mr-2"></i>
                                <span class="text-xl font-bold text-gray-800">Introvy.ai</span>
                            </div>
                            <button onclick="showHomepage()" class="text-gray-600 hover:text-blue-600">
                                <i class="fas fa-arrow-left mr-2"></i>Back to Home
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="container mx-auto px-6 py-8">
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-white rounded-lg shadow-lg p-8">
                            <div class="flex items-center mb-6">
                                <i class="fas fa-video text-3xl gradient-text mr-3"></i>
                                <h1 class="text-3xl font-bold text-gray-800">Post Your Job Video Spotlight</h1>
                            </div>
                            <p class="text-gray-600 mb-8">Create a 60-second video pitch for your job opening and reach talented candidates on our platform.</p>

                            <form id="recruiterForm" class="space-y-8">
                                <!-- Step 1: Record Video -->
                                <div class="border-b border-gray-200 pb-8">
                                    <h3 class="text-xl font-semibold mb-4">
                                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">1</span>
                                        Record Your 60-Second Pitch
                                    </h3>
                                    <div class="video-container mb-4">
                                        <video id="recruiterVideoPreview" autoplay muted playsinline class="w-full h-full object-cover"></video>
                                        <div id="recruiterVideoPlaceholder" class="absolute inset-0 flex items-center justify-center text-white">
                                            <div class="text-center">
                                                <i class="fas fa-video text-6xl mb-4"></i>
                                                <p class="text-xl">Click "Start Recording" to begin</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex space-x-4">
                                        <button type="button" id="recruiterStartRecording" onclick="startRecruiterRecording()" class="bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600">
                                            <i class="fas fa-record-vinyl mr-2"></i>Start Recording
                                        </button>
                                        <button type="button" id="recruiterStopRecording" onclick="stopRecruiterRecording()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600" disabled>
                                            <i class="fas fa-stop mr-2"></i>Stop Recording
                                        </button>
                                        <button type="button" id="recruiterRetakeVideo" onclick="retakeRecruiterVideo()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600" style="display: none;">
                                            <i class="fas fa-redo mr-2"></i>Retake
                                        </button>
                                    </div>
                                    <div id="recruiterRecordingStatus" class="mt-4 text-sm text-gray-600"></div>
                                </div>

                                <!-- Step 2: Job Details -->
                                <div class="border-b border-gray-200 pb-8">
                                    <h3 class="text-xl font-semibold mb-4">
                                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">2</span>
                                        Job Details
                                    </h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Job Title *</label>
                                            <input type="text" name="jobTitle" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Senior Software Engineer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Company Name *</label>
                                            <input type="text" name="companyName" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Your Company">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                                            <input type="text" name="location" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="San Francisco, CA / Remote">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Job URL</label>
                                            <input type="url" name="jobUrl" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="https://company.com/careers/job-id">
                                        </div>
                                    </div>
                                    <div class="mt-6">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Job Description</label>
                                        <textarea name="jobDescription" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Describe the role, requirements, and what makes your company special..."></textarea>
                                    </div>
                                </div>

                                <!-- Step 3: Skills & Tags -->
                                <div class="border-b border-gray-200 pb-8">
                                    <h3 class="text-xl font-semibold mb-4">
                                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">3</span>
                                        Required Skills
                                    </h3>
                                    <p class="text-gray-600 mb-4">Select relevant skills to help candidates find your job posting:</p>
                                    
                                    <div class="space-y-6">
                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-2">Technology</h4>
                                            <div class="flex flex-wrap">
                                                <span class="skill-tag" data-skill="JavaScript">JavaScript</span>
                                                <span class="skill-tag" data-skill="Python">Python</span>
                                                <span class="skill-tag" data-skill="React">React</span>
                                                <span class="skill-tag" data-skill="Node.js">Node.js</span>
                                                <span class="skill-tag" data-skill="TypeScript">TypeScript</span>
                                                <span class="skill-tag" data-skill="Java">Java</span>
                                                <span class="skill-tag" data-skill="C++">C++</span>
                                                <span class="skill-tag" data-skill="SQL">SQL</span>
                                                <span class="skill-tag" data-skill="AWS">AWS</span>
                                                <span class="skill-tag" data-skill="Docker">Docker</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-2">Business & Marketing</h4>
                                            <div class="flex flex-wrap">
                                                <span class="skill-tag" data-skill="Sales">Sales</span>
                                                <span class="skill-tag" data-skill="Marketing">Marketing</span>
                                                <span class="skill-tag" data-skill="Business Development">Business Development</span>
                                                <span class="skill-tag" data-skill="Finance">Finance</span>
                                                <span class="skill-tag" data-skill="Accounting">Accounting</span>
                                                <span class="skill-tag" data-skill="Project Management">Project Management</span>
                                                <span class="skill-tag" data-skill="Data Analysis">Data Analysis</span>
                                                <span class="skill-tag" data-skill="Customer Success">Customer Success</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-2">Healthcare</h4>
                                            <div class="flex flex-wrap">
                                                <span class="skill-tag" data-skill="Nursing">Nursing</span>
                                                <span class="skill-tag" data-skill="Medical Assistant">Medical Assistant</span>
                                                <span class="skill-tag" data-skill="Healthcare">Healthcare</span>
                                                <span class="skill-tag" data-skill="Physical Therapy">Physical Therapy</span>
                                                <span class="skill-tag" data-skill="Pharmacy">Pharmacy</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-2">Creative & Design</h4>
                                            <div class="flex flex-wrap">
                                                <span class="skill-tag" data-skill="Graphic Design">Graphic Design</span>
                                                <span class="skill-tag" data-skill="UX/UI Design">UX/UI Design</span>
                                                <span class="skill-tag" data-skill="Content Writing">Content Writing</span>
                                                <span class="skill-tag" data-skill="Photography">Photography</span>
                                                <span class="skill-tag" data-skill="Video Editing">Video Editing</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-2">Service & Retail</h4>
                                            <div class="flex flex-wrap">
                                                <span class="skill-tag" data-skill="Customer Service">Customer Service</span>
                                                <span class="skill-tag" data-skill="Retail">Retail</span>
                                                <span class="skill-tag" data-skill="Hospitality">Hospitality</span>
                                                <span class="skill-tag" data-skill="Restaurant">Restaurant</span>
                                                <span class="skill-tag" data-skill="Management">Management</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-2">Trade Skills</h4>
                                            <div class="flex flex-wrap">
                                                <span class="skill-tag" data-skill="Plumbing">Plumbing</span>
                                                <span class="skill-tag" data-skill="Electrical">Electrical</span>
                                                <span class="skill-tag" data-skill="Construction">Construction</span>
                                                <span class="skill-tag" data-skill="HVAC">HVAC</span>
                                                <span class="skill-tag" data-skill="Automotive">Automotive</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Custom Skills</label>
                                            <input type="text" id="customSkills" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter additional skills separated by commas">
                                        </div>
                                    </div>
                                    
                                    <div class="mt-4">
                                        <p class="text-sm text-gray-600">Selected skills:</p>
                                        <div id="selectedSkills" class="mt-2 min-h-[40px] p-3 bg-gray-50 rounded-lg border"></div>
                                    </div>
                                </div>

                                <!-- Step 4: Payment -->
                                <div>
                                    <h3 class="text-xl font-semibold mb-4">
                                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 inline-flex items-center justify-center text-sm mr-3">4</span>
                                        Payment - $25
                                    </h3>
                                    <p class="text-gray-600 mb-6">Your job video spotlight will appear on our public job wall immediately after payment.</p>
                                    
                                    <div class="bg-gray-50 p-6 rounded-lg">
                                        <h4 class="font-medium text-gray-700 mb-4">Payment Details</h4>
                                        <div id="card-element" class="mb-4">
                                            <!-- Stripe Elements will create form elements here -->
                                        </div>
                                        <div id="card-errors" role="alert" class="text-red-600 text-sm mb-4"></div>
                                        
                                        <div class="flex items-center justify-between bg-white p-4 rounded border">
                                            <span class="font-medium">Job Video Spotlight</span>
                                            <span class="text-xl font-bold">$25.00</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Submit Button -->
                                <div class="flex justify-center pt-8">
                                    <button type="submit" id="recruiterSubmitBtn" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:from-blue-600 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed">
                                        <i class="fas fa-rocket mr-2"></i>Post Job Spotlight - $25
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submission View Section -->
        <div id="submission-view" class="hidden">
            <div class="min-h-screen bg-gray-50">
                <!-- Header -->
                <div class="bg-white shadow-sm">
                    <div class="container mx-auto px-6 py-4">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center">
                                <i class="fas fa-video text-2xl gradient-text mr-2"></i>
                                <span class="text-xl font-bold text-gray-800">Introvy.ai</span>
                            </div>
                            <div class="text-sm text-gray-600">Video Application Submission</div>
                        </div>
                    </div>
                </div>

                <!-- Submission Content -->
                <div class="container mx-auto px-6 py-8">
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-white rounded-lg shadow-lg p-8">
                            <div id="submission-content">
                                <!-- Content will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-lg text-center">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
            <p class="text-lg font-medium">Processing...</p>
            <p class="text-gray-600 mt-2">Please wait</p>
        </div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Initialize Stripe
        const stripe = Stripe('pk_live_51RekLCKBxvvnhL2UaEeUyQPtUpy7MtyQNSdlvMmqKDjPg7f9gbBcP322NzBdfsuhzepJVzFbh2VURBlMDsR5RV5700NvlUdjNN');
        const elements = stripe.elements();

        // Global variables
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let videoResponses = [];
        let mediaRecorder;
        let recordedChunks = [];
        let currentStream;
        let selectedSkills = new Set();
        let regenerationsUsed = 0;
        let currentSubmissionId = null;
        let currentUserId = 'user-' + Math.random().toString(36).substr(2, 9);

        // Navigation functions
        function showHomepage() {
            document.getElementById('homepage-section').classList.remove('hidden');
            document.getElementById('candidate-application').classList.add('hidden');
            document.getElementById('recruiter-posting').classList.add('hidden');
            document.getElementById('submission-view').classList.add('hidden');
        }

        function showCandidateApplication() {
            document.getElementById('homepage-section').classList.add('hidden');
            document.getElementById('candidate-application').classList.remove('hidden');
            document.getElementById('recruiter-posting').classList.add('hidden');
            document.getElementById('submission-view').classList.add('hidden');
        }

        function showRecruiterPosting() {
            document.getElementById('homepage-section').classList.add('hidden');
            document.getElementById('candidate-application').classList.add('hidden');
            document.getElementById('recruiter-posting').classList.remove('hidden');
            document.getElementById('submission-view').classList.add('hidden');
            initializeRecruiterForm();
        }

        function showSubmissionView(submissionId) {
            document.getElementById('homepage-section').classList.add('hidden');
            document.getElementById('candidate-application').classList.add('hidden');
            document.getElementById('recruiter-posting').classList.add('hidden');
            document.getElementById('submission-view').classList.remove('hidden');
            loadSubmission(submissionId);
        }

        // Smooth scrolling
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.smooth-scroll').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Check for submission ID in URL
            const urlParams = new URLSearchParams(window.location.search);
            const submissionId = urlParams.get('id');
            if (submissionId) {
                showSubmissionView(submissionId);
            }
        });

        // Candidate Application Functions
        async function generateQuestions() {
            const jobDescription = document.getElementById('jobDescription').value;
            const difficulty = document.getElementById('difficultyLevel').value;
            const userPlan = document.getElementById('userPlan').value;
            const candidateName = document.getElementById('candidateName').value;
            const jobTitle = document.getElementById('jobTitle').value;
            const companyName = document.getElementById('companyName').value;

            if (!jobDescription || !candidateName || !jobTitle || !companyName) {
                alert('Please fill in all required fields.');
                return;
            }

            if (userPlan === 'free' && difficulty === 'hard') {
                alert('Hard difficulty is only available for Pro users. Please upgrade to Pro or select a different difficulty.');
                return;
            }

            document.getElementById('loadingModal').classList.remove('hidden');

            try {
                const response = await fetch('https://introvy-backend.vercel.app/api/ai/generate-questions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        jobDescription,
                        difficulty,
                        questionCount: 3,
                        userId: currentUserId,
                        userPlan: userPlan,
                        isRegeneration: false
                    })
                });

                const data = await response.json();

                if (data.success) {
                    currentQuestions = data.questions;
                    displayQuestions();
                    document.getElementById('step-questions').classList.remove('hidden');
                    updateRegenerationControls();
                } else {
                    alert('Error: ' + (data.error || 'Failed to generate questions'));
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error generating questions. Please try again.');
            } finally {
                document.getElementById('loadingModal').classList.add('hidden');
            }
        }

        async function regenerateQuestions() {
            const jobDescription = document.getElementById('jobDescription').value;
            const difficulty = document.getElementById('difficultyLevel').value;
            const userPlan = document.getElementById('userPlan').value;

            const maxRegens = userPlan === 'pro' ? 2 : 1;
            if (regenerationsUsed >= maxRegens) {
                alert(`You've reached your regeneration limit. ${userPlan === 'free' ? 'Upgrade to Pro for more regenerations.' : ''}`);
                return;
            }

            document.getElementById('loadingModal').classList.remove('hidden');

            try {
                const response = await fetch('https://introvy-backend.vercel.app/api/ai/generate-questions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        jobDescription,
                        difficulty,
                        questionCount: 3,
                        userId: currentUserId,
                        submissionId: currentSubmissionId,
                        userPlan: userPlan,
                        isRegeneration: true
                    })
                });

                const data = await response.json();

                if (data.success) {
                    currentQuestions = data.questions;
                    regenerationsUsed++;
                    displayQuestions();
                    updateRegenerationControls();
                } else {
                    alert('Error: ' + (data.error || 'Failed to regenerate questions'));
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error regenerating questions. Please try again.');
            } finally {
                document.getElementById('loadingModal').classList.add('hidden');
            }
        }

        function displayQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = currentQuestions.map((q, index) => `
                <div class="bg-blue-50 p-4 rounded-lg">
                    <div class="flex items-start">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">${index + 1}</span>
                        <div class="flex-1">
                            <p class="text-gray-800 font-medium">${q.question}</p>
                            <div class="flex items-center mt-2 space-x-4">
                                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">${q.category}</span>
                                <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">${q.difficulty}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateRegenerationControls() {
            const userPlan = document.getElementById('userPlan').value;
            const maxRegens = userPlan === 'pro' ? 2 : 1;
            const countElement = document.getElementById('regeneration-count');
            const btnElement = document.getElementById('regenerateBtn');
            
            countElement.textContent = `${regenerationsUsed}/${maxRegens} regenerations used`;
            
            if (regenerationsUsed >= maxRegens) {
                btnElement.disabled = true;
                btnElement.classList.add('opacity-50', 'cursor-not-allowed');
                if (userPlan === 'free') {
                    btnElement.innerHTML = '<i class="fas fa-crown mr-2"></i>Upgrade to Pro';
                }
            }
        }

        function startRecording() {
            currentQuestionIndex = 0;
            videoResponses = [];
            document.getElementById('step-recording').classList.remove('hidden');
            displayCurrentQuestion();
            updateProgress();
        }

        function displayCurrentQuestion() {
            const questionElement = document.getElementById('current-question').querySelector('p');
            if (currentQuestions[currentQuestionIndex]) {
                questionElement.textContent = `Question ${currentQuestionIndex + 1}: ${currentQuestions[currentQuestionIndex].question}`;
            }
        }

        async function startVideoRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: true, 
                    audio: {
                        echoCancellation: true,
                        noiseSuppression: true,
                        autoGainControl: true
                    }
                });
                
                currentStream = stream;
                const videoPreview = document.getElementById('videoPreview');
                videoPreview.srcObject = stream;
                document.getElementById('videoPlaceholder').style.display = 'none';
                
                mediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'video/webm;codecs=vp9'
                });
                
                recordedChunks = [];
                
                mediaRecorder.ondataavailable = (event) => {
                    if (event.data.size > 0) {
                        recordedChunks.push(event.data);
                    }
                };
                
                mediaRecorder.onstop = () => {
                    const blob = new Blob(recordedChunks, { type: 'video/webm' });
                    videoResponses[currentQuestionIndex] = {
                        questionId: currentQuestions[currentQuestionIndex].id,
                        videoBlob: blob,
                        duration: Math.floor(Math.random() * 60) + 30 // Approximate duration
                    };
                    
                    // Show recorded video
                    const url = URL.createObjectURL(blob);
                    videoPreview.srcObject = null;
                    videoPreview.src = url;
                    
                    // Stop all tracks
                    if (currentStream) {
                        currentStream.getTracks().forEach(track => track.stop());
                    }
                    
                    document.getElementById('nextQuestionBtn').classList.remove('hidden');
                };
                
                mediaRecorder.start();
                
                document.getElementById('startRecordingBtn').disabled = true;
                document.getElementById('stopRecordingBtn').disabled = false;
                document.getElementById('recordingStatus').innerHTML = '<span class="recording-indicator"></span> Recording in progress... (90 seconds max)';
                
                // Auto-stop after 90 seconds
                setTimeout(() => {
                    if (mediaRecorder && mediaRecorder.state === 'recording') {
                        stopVideoRecording();
                    }
                }, 90000);
                
            } catch (error) {
                console.error('Error starting recording:', error);
                alert('Error accessing camera/microphone. Please ensure permissions are granted.');
            }
        }

        function stopVideoRecording() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                document.getElementById('startRecordingBtn').disabled = false;
                document.getElementById('stopRecordingBtn').disabled = true;
                document.getElementById('recordingStatus').innerHTML = '<span class="text-green-600">Recording complete! You can move to the next question.</span>';
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            updateProgress();
            
            if (currentQuestionIndex < currentQuestions.length) {
                // Reset for next question
                document.getElementById('videoPreview').srcObject = null;
                document.getElementById('videoPreview').src = '';
                document.getElementById('videoPlaceholder').style.display = 'flex';
                document.getElementById('nextQuestionBtn').classList.add('hidden');
                document.getElementById('recordingStatus').textContent = '';
                displayCurrentQuestion();
            } else {
                // All questions completed
                document.getElementById('step-submit').classList.remove('hidden');
            }
        }

        function updateProgress() {
            const total = currentQuestions.length;
            const completed = videoResponses.length;
            const percentage = (completed / total) * 100;
            
            document.getElementById('progressText').textContent = `${completed} of ${total} questions completed`;
            document.getElementById('progressBar').style.width = percentage + '%';
        }

        async function submitApplication() {
            const candidateName = document.getElementById('candidateName').value;
            const jobTitle = document.getElementById('jobTitle').value;
            const companyName = document.getElementById('companyName').value;
            const jobDescription = document.getElementById('jobDescription').value;

            document.getElementById('loadingModal').classList.remove('hidden');

            try {
                // Create submission data
                const submissionData = {
                    candidateName,
                    jobTitle,
                    companyName,
                    jobDescription,
                    questions: currentQuestions,
                    videoResponses: videoResponses.map(vr => ({
                        questionId: vr.questionId,
                        duration: vr.duration,
                        recorded: true
                    })),
                    userId: currentUserId
                };

                const response = await fetch('https://introvy-backend.vercel.app/api/submission/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(submissionData)
                });

                const data = await response.json();

                if (data.success) {
                    const submissionUrl = `${window.location.origin}?id=${data.submissionId}`;
                    document.getElementById('submissionLink').textContent = submissionUrl;
                    document.getElementById('step-success').classList.remove('hidden');
                    document.getElementById('step-submit').classList.add('hidden');
                } else {
                    alert('Error submitting application: ' + (data.error || 'Unknown error'));
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Error submitting application. Please try again.');
            } finally {
                document.getElementById('loadingModal').classList.add('hidden');
            }
        }

        function copyLink() {
            const link = document.getElementById('submissionLink').textContent;
            navigator.clipboard.writeText(link).then(() => {
                alert('Link copied to clipboard!');
            });
        }

        // Recruiter Functions
        let recruiterMediaRecorder;
        let recruiterRecordedChunks = [];
        let recruiterVideoBlob;
        let recruiterStream;
        let cardElement;

        function initializeRecruiterForm() {
            // Initialize Stripe card element
            if (!cardElement) {
                cardElement = elements.create('card', {
                    style: {
                        base: {
                            fontSize: '16px',
                            color: '#424770',
                            '::placeholder': {
                                color: '#aab7c4',
                            },
                        },
                    },
                });
                cardElement.mount('#card-element');

                cardElement.on('change', ({error}) => {
                    const displayError = document.getElementById('card-errors');
                    if (error) {
                        displayError.textContent = error.message;
                    } else {
                        displayError.textContent = '';
                    }
                });
            }

            // Initialize skill selection
            document.querySelectorAll('.skill-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    const skill = this.dataset.skill;
                    if (selectedSkills.has(skill)) {
                        selectedSkills.delete(skill);
                        this.classList.remove('selected');
                    } else {
                        selectedSkills.add(skill);
                        this.classList.add('selected');
                    }
                    updateSelectedSkillsDisplay();
                });
            });

            document.getElementById('customSkills').addEventListener('input', function() {
                updateSelectedSkillsDisplay();
            });

            // Form submission
            document.getElementById('recruiterForm').addEventListener('submit', handleRecruiterSubmission);
        }

        async function startRecruiterRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: true, 
                    audio: {
                        echoCancellation: true,
                        noiseSuppression: true,
                        autoGainControl: true
                    }
                });
                
                recruiterStream = stream;
                const videoPreview = document.getElementById('recruiterVideoPreview');
                videoPreview.srcObject = stream;
                document.getElementById('recruiterVideoPlaceholder').style.display = 'none';
                
                recruiterMediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'video/webm;codecs=vp9'
                });
                
                recruiterRecordedChunks = [];
                
                recruiterMediaRecorder.ondataavailable = (event) => {
                    if (event.data.size > 0) {
                        recruiterRecordedChunks.push(event.data);
                    }
                };
                
                recruiterMediaRecorder.onstop = () => {
                    recruiterVideoBlob = new Blob(recruiterRecordedChunks, { type: 'video/webm' });
                    const url = URL.createObjectURL(recruiterVideoBlob);
                    videoPreview.srcObject = null;
                    videoPreview.src = url;
                    
                    // Stop all tracks
                    if (recruiterStream) {
                        recruiterStream.getTracks().forEach(track => track.stop());
                    }
                    
                    document.getElementById('recruiterRetakeVideo').style.display = 'inline-block';
                };
                
                recruiterMediaRecorder.start();
                
                document.getElementById('recruiterStartRecording').disabled = true;
                document.getElementById('recruiterStopRecording').disabled = false;
                document.getElementById('recruiterRecordingStatus').innerHTML = '<span class="recording-indicator"></span> Recording... (60 seconds max)';
                
                // Auto-stop after 60 seconds
                setTimeout(() => {
                    if (recruiterMediaRecorder && recruiterMediaRecorder.state === 'recording') {
                        stopRecruiterRecording();
                    }
                }, 60000);
                
            } catch (error) {
                console.error('Error starting recording:', error);
                alert('Error accessing camera/microphone. Please ensure permissions are granted.');
            }
        }

        function stopRecruiterRecording() {
            if (recruiterMediaRecorder && recruiterMediaRecorder.state === 'recording') {
                recruiterMediaRecorder.stop();
                document.getElementById('recruiterStartRecording').disabled = false;
                document.getElementById('recruiterStopRecording').disabled = true;
                document.getElementById('recruiterRecordingStatus').innerHTML = '<span class="text-green-600">Recording complete! You can retake if needed.</span>';
            }
        }

        function retakeRecruiterVideo() {
            recruiterVideoBlob = null;
            document.getElementById('recruiterVideoPreview').src = '';
            document.getElementById('recruiterVideoPlaceholder').style.display = 'flex';
            document.getElementById('recruiterRetakeVideo').style.display = 'none';
            document.getElementById('recruiterRecordingStatus').textContent = '';
        }

        function updateSelectedSkillsDisplay() {
            const customSkillsInput = document.getElementById('customSkills').value;
            const customSkills = customSkillsInput.split(',').map(s => s.trim()).filter(s => s);
            const allSkills = [...selectedSkills, ...customSkills];
            
            const display = document.getElementById('selectedSkills');
            if (allSkills.length === 0) {
                display.innerHTML = '<span class="text-gray-400">No skills selected</span>';
            } else {
                display.innerHTML = allSkills.map(skill => 
                    `<span class="skill-tag selected">${skill}</span>`
                ).join('');
            }
        }

        async function handleRecruiterSubmission(e) {
            e.preventDefault();
            
            if (!recruiterVideoBlob) {
                alert('Please record a video first.');
                return;
            }
            
            const formData = new FormData(e.target);
            if (!formData.get('jobTitle') || !formData.get('companyName')) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const submitBtn = document.getElementById('recruiterSubmitBtn');
            const loadingModal = document.getElementById('loadingModal');
            
            try {
                submitBtn.disabled = true;
                loadingModal.classList.remove('hidden');
                
                // Create payment intent
                const paymentIntentResponse = await fetch('https://introvy-backend.vercel.app/api/payment/create-intent', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ amount: 2500 })
                });
                
                const paymentIntentData = await paymentIntentResponse.json();
                
                if (!paymentIntentData.clientSecret) {
                    throw new Error('Failed to create payment intent');
                }
                
                // Confirm payment
                const result = await stripe.confirmCardPayment(paymentIntentData.clientSecret, {
                    payment_method: {
                        card: cardElement,
                    }
                });
                
                if (result.error) {
                    throw new Error(result.error.message);
                }
                
                // Prepare job data
                const customSkillsInput = document.getElementById('customSkills').value;
                const customSkills = customSkillsInput.split(',').map(s => s.trim()).filter(s => s);
                const allSkills = [...selectedSkills, ...customSkills];
                
                // Convert video blob to base64 for now
                const videoBase64 = await blobToBase64(recruiterVideoBlob);
                
                const jobData = {
                    jobTitle: formData.get('jobTitle'),
                    companyName: formData.get('companyName'),
                    location: formData.get('location') || '',
                    jobDescription: formData.get('jobDescription') || '',
                    jobUrl: formData.get('jobUrl') || '',
                    skillTags: allSkills,
                    recruiterName: '',
                    recruiterEmail: '',
                    videoData: {
                        base64: videoBase64,
                        mimeType: 'video/webm',
                        duration: 60
                    },
                    videoFileUrl: 'placeholder-video-url',
                    paymentIntentId: result.paymentIntent.id
                };
                
                // Submit to backend
                const response = await fetch('https://introvy-backend.vercel.app/api/recruiter/post-job', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(jobData)
                });
                
                const jobResult = await response.json();
                
                if (jobResult.success) {
                    alert('Success! Your job video spotlight has been posted and is now live.');
                    showHomepage();
                } else {
                    throw new Error(jobResult.error || 'Failed to post job');
                }
                
            } catch (error) {
                console.error('Error posting job:', error);
                alert('Error: ' + error.message);
            } finally {
                submitBtn.disabled = false;
                loadingModal.classList.add('hidden');
            }
        }

        function blobToBase64(blob) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onloadend = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(blob);
            });
        }

        // Submission View Functions
        async function loadSubmission(submissionId) {
            document.getElementById('loadingModal').classList.remove('hidden');
            
            try {
                const response = await fetch(`https://introvy-backend.vercel.app/api/submission-view?id=${submissionId}`);
                
                if (!response.ok) {
                    throw new Error('Submission not found');
                }
                
                const data = await response.json();
                
                if (data.success) {
                    displaySubmission(data.submission);
                } else {
                    document.getElementById('submission-content').innerHTML = `
                        <div class="text-center py-12">
                            <i class="fas fa-exclamation-triangle text-6xl text-red-300 mb-4"></i>
                            <h2 class="text-2xl font-bold text-red-600 mb-4">Submission Not Found</h2>
                            <p class="text-gray-600 mb-6">The submission you're looking for doesn't exist or has been removed.</p>
                            <button onclick="showHomepage()" class="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition">
                                Go to Homepage
                            </button>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading submission:', error);
                document.getElementById('submission-content').innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-6xl text-red-300 mb-4"></i>
                        <h2 class="text-2xl font-bold text-red-600 mb-4">Error Loading Submission</h2>
                        <p class="text-gray-600 mb-6">There was an error loading this submission. Please try again later.</p>
                        <button onclick="showHomepage()" class="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition">
                            Go to Homepage
                        </button>
                    </div>
                `;
            } finally {
                document.getElementById('loadingModal').classList.add('hidden');
            }
        }

        function displaySubmission(submission) {
            document.getElementById('submission-content').innerHTML = `
                <div class="text-center mb-8">
                    <div class="flex items-center justify-center mb-4">
                        <i class="fas fa-video text-4xl gradient-text mr-3"></i>
                        <h1 class="text-3xl font-bold text-gray-800">Video Application</h1>
                    </div>
                    <div class="bg-blue-50 p-6 rounded-lg">
                        <h2 class="text-2xl font-bold text-blue-800 mb-2">${submission.candidateName}</h2>
                        <p class="text-lg text-blue-700">${submission.jobTitle} at ${submission.companyName}</p>
                        <p class="text-sm text-blue-600 mt-2">Submitted ${new Date(submission.createdAt).toLocaleDateString()}</p>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold mb-4">Interview Questions & Responses</h3>
                        ${submission.questions.map((question, index) => `
                            <div class="bg-gray-50 p-6 rounded-lg mb-4">
                                <div class="flex items-start mb-4">
                                    <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm mr-3 mt-1">${index + 1}</span>
                                    <p class="text-gray-800 font-medium flex-1">${question.question}</p>
                                </div>
                                <div class="ml-11">
                                    <div class="bg-green-100 text-green-800 p-3 rounded">
                                        <i class="fas fa-video mr-2"></i>Video Response Recorded
                                        <span class="text-sm ml-2">(Duration: ~60 seconds)</span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    ${submission.jobDescription ? `
                        <div>
                            <h3 class="text-xl font-semibold mb-4">Job Description</h3>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-700 whitespace-pre-wrap">${submission.jobDescription}</p>
                            </div>
                        </div>
                    ` : ''}
                </div>
                
                <div class="mt-8 pt-6 border-t border-gray-200 text-center">
                    <p class="text-sm text-gray-500 mb-4">Powered by</p>
                    <div class="flex items-center justify-center">
                        <i class="fas fa-video text-2xl gradient-text mr-2"></i>
                        <span class="text-xl font-bold text-gray-800">Introvy.ai</span>
                    </div>
                    <button onclick="showHomepage()" class="mt-4 bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition">
                        Create Your Own Video Application
                    </button>
                </div>
            `;
        }

        // Initialize selected skills display
        if (document.getElementById('selectedSkills')) {
            updateSelectedSkillsDisplay();
        }
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"958908dcad2d540f","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.6.2","token":"4edd5f8ec12a48cfa682ab8261b80a79"}' crossorigin="anonymous"></script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDuFSGcpEFl3gNeJbrnxmRp90FJHUce5Ha1Z0swGMajnqILgZOj08ikphT3j14wwbiZwiQloTHsyDCE4UgpWlYQgRVNHwEMaWcWHy7FrqjrH7B8t04S07uQQwDYWU63HWv7A8ZXHJ%2BXipXmChegyw%2Bs4GowGO6RJ9%2BBnP7m68WK74PwT9OX0q0gEHxXycpMchHHl2m3JhYS6kCzxoTPO6Mh2axemcAFMwX8dkejvTYwwXJjsqQB8DO7FBDl%2B3FkmjS0sXITj0mG7lT4qaDb1IJIAbas%2Bc3e0TUYz2Woe89H66oDeWLePxou0y1neeLV6phflZ5W3bBcGpRit%2B%2F5QrtO8vHXjc3SmVgLicjm%2Bm0%2BHafCRQDNlN7hnw%2Bphn2zGTFYKL3GNjdknJ05Rx4XbEDjEc8eKlgpgQDlE7db%2BTkD3JINN%2Fs0xCwkkJYGRJzwK97ogaGoX%2Ff%2Ba7d5hANcX%2BoYy8WszR0a4IqwHt7JKJPAgBJsviW3YcfzPXMm5Hw0kZsnaTjGNSDSfwM8IyNw3%2BeyY%3D";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDuFSGcpEFl3gNeJbrnxmRp90FJHUce5Ha1Z0swGMajnqILgZOj08ikphT3j14wwbiZwiQloTHsyDCE4UgpWlYQgRVNHwEMaWcWHy7FrqjrH7B8t04S07uQQwDYWU63HWv7A8ZXHJ+XipXmChegyw+s4GowGO6RJ9+BnP7m68WK74PwT9OX0q0gEHxXycpMchHHl2m3JhYS6kCzxoTPO6Mh2axemcAFMwX8dkejvTYwwXJjsqQB8DO7FBDl+3FkmjS0sXITj0mG7lT4qaDb1IJIAbas+c3e0TUYz2Woe89H66oDeWLePxou0y1neeLV6phflZ5W3bBcGpRit+/5QrtO8vHXjc3SmVgLicjm+m0+HafCRQDNlN7hnw+phn2zGTFYKL3GNjdknJ05Rx4XbEDjEc8eKlgpgQDlE7db+TkD3JINN/s0xCwkkJYGRJzwK97ogaGoX/f+a7d5hANcX+oYy8WszR0a4IqwHt7JKJPAgBJsviW3YcfzPXMm5Hw0kZsnaTjGNSDSfwM8IyNw3+eyY=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    